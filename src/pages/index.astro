---
import BaseLayout from '../layouts/BaseLayout.astro';
import GameCard from '../components/GameCard.astro';
import { getAllGames } from '../lib/games';

const games = getAllGames();
---

<BaseLayout>
  <!-- Hero Section -->
  <section class="relative min-h-screen flex items-center justify-center overflow-hidden">
    <!-- Radial gradient background -->
    <div class="absolute inset-0 opacity-30">
      <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_rgba(51,255,102,0.08)_0%,_transparent_70%)]"></div>
    </div>

    <div class="relative text-center px-6">
      <h1
        class="font-[family-name:var(--font-display)] text-7xl md:text-9xl lg:text-[10rem] font-bold tracking-tighter text-[var(--color-bone)] mb-6 hero-title"
      >
        PARALLAX
      </h1>
      <p class="text-xl md:text-2xl text-[var(--color-muted)] font-[family-name:var(--font-display)] tracking-wide mb-4 hero-tagline">
        14 games. 14 industries. Every angle.
      </p>
      <p class="text-sm text-[var(--color-dim)] font-[family-name:var(--font-mono)] tracking-widest hero-sub">
        A GAME DESIGN STUDIO
      </p>

      <!-- Scroll indicator -->
      <div class="absolute bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 animate-bounce">
        <span class="text-xs text-[var(--color-dim)] font-[family-name:var(--font-mono)] tracking-widest">SCROLL</span>
        <svg class="w-4 h-4 text-[var(--color-dim)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
        </svg>
      </div>
    </div>
  </section>

  <!-- Game Grid Section -->
  <section class="py-24 px-6" id="games">
    <div class="max-w-7xl mx-auto">
      <div class="flex items-center gap-4 mb-16">
        <span class="text-xs font-[family-name:var(--font-mono)] tracking-widest text-[var(--color-phosphor)]">01—14</span>
        <span class="flex-1 h-px bg-white/5"></span>
        <h2 class="font-[family-name:var(--font-display)] text-3xl md:text-4xl font-bold">The Games</h2>
        <span class="flex-1 h-px bg-white/5"></span>
        <a href="/games" class="text-xs font-[family-name:var(--font-mono)] tracking-widest text-[var(--color-muted)] hover:text-[var(--color-phosphor)] transition-colors">VIEW ALL →</a>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
        {games.map(game => (
          <GameCard game={game} />
        ))}
      </div>
    </div>
  </section>

  <!-- Studio Intro Section -->
  <section class="py-24 px-6 border-t border-white/5">
    <div class="max-w-4xl mx-auto text-center">
      <span class="text-xs font-[family-name:var(--font-mono)] tracking-widest text-[var(--color-phosphor)] block mb-8">THE STUDIO</span>
      <h2 class="font-[family-name:var(--font-display)] text-3xl md:text-5xl font-bold mb-8">
        We look at entertainment from every angle.
      </h2>
      <p class="text-lg text-[var(--color-muted)] leading-relaxed mb-8 max-w-2xl mx-auto">
        Parallax Studios is a game design studio with 14 concepts spanning TV, film, gaming, advertising, Broadway, comedy, animation, and street culture. Each game is a deep simulation of an industry you've never seen simulated.
      </p>
      <div class="flex items-center justify-center gap-12 text-center mb-12">
        <div>
          <span class="font-[family-name:var(--font-display)] text-4xl font-bold text-[var(--color-phosphor)]">14</span>
          <p class="text-xs text-[var(--color-dim)] font-[family-name:var(--font-mono)] mt-1">GAMES</p>
        </div>
        <div>
          <span class="font-[family-name:var(--font-display)] text-4xl font-bold text-[var(--color-amber)]">84</span>
          <p class="text-xs text-[var(--color-dim)] font-[family-name:var(--font-mono)] mt-1">DOCUMENTS</p>
        </div>
        <div>
          <span class="font-[family-name:var(--font-display)] text-4xl font-bold text-[var(--color-bone)]">700K+</span>
          <p class="text-xs text-[var(--color-dim)] font-[family-name:var(--font-mono)] mt-1">WORDS</p>
        </div>
      </div>
      <a
        href="/studio"
        class="inline-block border border-[var(--color-phosphor)]/30 text-[var(--color-phosphor)] px-8 py-3 rounded-lg font-[family-name:var(--font-mono)] text-sm tracking-wider hover:bg-[var(--color-phosphor)]/10 transition-colors"
      >
        MEET THE TEAM →
      </a>
    </div>
  </section>

  <script>
    import { gsap } from 'gsap';
    import { ScrollTrigger } from 'gsap/ScrollTrigger';

    gsap.registerPlugin(ScrollTrigger);

    // Hero animation
    gsap.from('.hero-title', {
      opacity: 0,
      y: 40,
      duration: 1.2,
      ease: 'power3.out',
    });

    gsap.from('.hero-tagline', {
      opacity: 0,
      y: 20,
      duration: 1,
      delay: 0.4,
      ease: 'power3.out',
    });

    gsap.from('.hero-sub', {
      opacity: 0,
      y: 20,
      duration: 1,
      delay: 0.7,
      ease: 'power3.out',
    });

    // Scroll-driven reveals for game cards
    document.querySelectorAll('.card-glow').forEach((card, i) => {
      gsap.from(card, {
        scrollTrigger: {
          trigger: card,
          start: 'top 90%',
          toggleActions: 'play none none none',
        },
        opacity: 0,
        y: 30,
        duration: 0.6,
        delay: (i % 4) * 0.1,
        ease: 'power2.out',
      });
    });
  </script>
</BaseLayout>
